FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=nointeractive
ENV LANG=en_US.UTF-8
ENV LC_ALL=en_US.UTF-8

RUN apt-get update && \
    apt-get install -y build-essential chrpath cpio debianutils diffstat \
	file gawk gcc git iputils-ping libacl1 liblz4-tool locales \
	python3 python3-git python3-jinja2 python3-pexpect python3-pip \
	python3-subunit socat texinfo unzip wget xz-utils zstd

RUN locale-gen en_US.UTF-8 && update-locale LANG=en_US.UTF-8

RUN apt-get install -y python3-venv && python3 -m venv /opt/kas-venv
RUN /opt/kas-venv/bin/pip install kas
ENV PATH="/opt/kas-venv/bin:$PATH"

RUN rm -rf /var/lib/apt/lists/*

RUN useradd -m -s /bin/bash yocto
USER yocto
