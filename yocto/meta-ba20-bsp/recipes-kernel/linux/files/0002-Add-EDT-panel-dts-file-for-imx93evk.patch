From 5bc419c959ba352bf0eef3e38152c651e6d9b4ef Mon Sep 17 00:00:00 2001
From: Kas User <kas@example.com>
Date: Tue, 28 May 2024 08:42:54 +0000
Subject: [PATCH] Add EDT panel dts file for imx93evk

---
 arch/arm64/boot/dts/freescale/Makefile        |   1 +
 .../imx93-11x11-evk-edt-lvds-panel.dts        | 103 ++++++++++++++++++
 2 files changed, 104 insertions(+)
 create mode 100644 arch/arm64/boot/dts/freescale/imx93-11x11-evk-edt-lvds-panel.dts

diff --git a/arch/arm64/boot/dts/freescale/Makefile b/arch/arm64/boot/dts/freescale/Makefile
index 40006fbe1a43..18edbd1d57f3 100644
--- a/arch/arm64/boot/dts/freescale/Makefile
+++ b/arch/arm64/boot/dts/freescale/Makefile
@@ -364,6 +364,7 @@ dtb-$(CONFIG_ARCH_MXC) += imx93-11x11-evk.dtb \
 			  imx93-11x11-evk-i3c.dtb imx93-11x11-evk-lpuart.dtb \
 			  imx93-11x11-evk-mqs.dtb imx93-11x11-evk-aud-hat.dtb \
 			  imx93-11x11-evk-rm67199.dtb imx93-11x11-evk-boe-wxga-lvds-panel.dtb \
+			  imx93-11x11-evk-edt-lvds-panel.dtb \
 			  imx93-11x11-evk-flexspi-m2.dtb \
 			  imx93-11x11-evk-mt9m114.dtb \
 			  imx93-11x11-evk-ld.dtb \
diff --git a/arch/arm64/boot/dts/freescale/imx93-11x11-evk-edt-lvds-panel.dts b/arch/arm64/boot/dts/freescale/imx93-11x11-evk-edt-lvds-panel.dts
new file mode 100644
index 000000000000..a5a1a88b693e
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/imx93-11x11-evk-edt-lvds-panel.dts
@@ -0,0 +1,103 @@
+// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
+/*
+ * Copyright 2022 NXP
+ */
+
+#include "imx93-11x11-evk.dts"
+
+/ {
+	lvds_backlight: lvds_backlight {
+		compatible = "pwm-backlight";
+		pwms = <&adp5585pwm 0 100000 0>;
+		enable-gpios = <&adp5585gpio 8 GPIO_ACTIVE_HIGH>;
+		power-supply = <&reg_vdd_12v>;
+		status = "okay";
+
+		brightness-levels = < 0  1  2  3  4  5  6  7  8  9
+				     10 11 12 13 14 15 16 17 18 19
+				     20 21 22 23 24 25 26 27 28 29
+				     30 31 32 33 34 35 36 37 38 39
+				     40 41 42 43 44 45 46 47 48 49
+				     50 51 52 53 54 55 56 57 58 59
+				     60 61 62 63 64 65 66 67 68 69
+				     70 71 72 73 74 75 76 77 78 79
+				     80 81 82 83 84 85 86 87 88 89
+				     90 91 92 93 94 95 96 97 98 99
+				    100>;
+		default-brightness-level = <100>;
+	};
+
+	lvds_panel {
+		compatible = "edt,etml1010e6dhu";
+		backlight = <&lvds_backlight>;
+
+		port {
+			panel_lvds_in: endpoint {
+				remote-endpoint = <&lvds_out>;
+			};
+		};
+	};
+};
+
+&adv7535 {
+	status = "disabled";
+};
+
+&dphy {
+	status = "disabled";
+};
+
+&dsi {
+	status = "disabled";
+};
+
+&lcdif {
+	assigned-clock-rates = <498000000>, <71142857>, <400000000>, <133333333>;
+};
+
+&ldb {
+	status = "okay";
+
+	lvds-channel@0 {
+		status = "okay";
+
+		port@1 {
+			reg = <1>;
+
+			lvds_out: endpoint {
+				remote-endpoint = <&panel_lvds_in>;
+			};
+		};
+	};
+};
+
+&ldb_phy {
+	status = "okay";
+};
+
+&lpi2c1 {
+	touch: sis9255@5c {
+		compatible = "sis,9200-ts";
+		reg = <0x5c>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&pinctrl_ctp_int>;
+		pinctrl-1 = <&pinctrl_ctp_reset>;
+		interrupt-parent = <&gpio2>;
+             	interrupts = <21 IRQ_TYPE_EDGE_FALLING>;
+		reset-gpios = <&pcal6524 17 GPIO_ACTIVE_LOW>;
+		status = "okay";
+	};
+};
+
+&iomuxc {
+	pinctrl_ctp_int: ctp_int_grp {
+		fsl,pins = <
+			MX93_PAD_GPIO_IO21__GPIO2_IO21          0x31e
+		>;
+	};
+	pinctrl_ctp_reset: ctp_reset_grp {
+		fsl,pins = <
+			MX93_PAD_SD1_DATA7__GPIO3_IO17          0x31e
+		>;
+	};
+};
-- 
2.39.2

